[params]

# mail domain (MUST be set to fully qualified chat mail domain)
mail_domain = <%= @config['domain'] %>

#
# If you only do private test deploys, you don't need to modify any settings below
#

#
# Restrictions on user addresses
#

# how many mails a user can send out per minute
max_user_send_per_minute = <%= @config['max_user_send_per_minute'] %>

# maximum mailbox size of a chatmail address
max_mailbox_size = <%= @config['max_mailbox_size'] %>

# maximum message size for an e-mail in bytes
max_message_size = <%= @config['max_message_size'] %>

# days after which mails are unconditionally deleted
delete_mails_after = <%= @config['delete_mails_after'] %>

# days after which users without a successful login are deleted (database and mails)
delete_inactive_users_after = <%= @config['delete_inactive_users_after'] %>

# minimum length a username must have
username_min_length = <%= @config['username_min_length'] %>

# maximum length a username can have
username_max_length = <%= @config['username_max_length'] %>

# minimum length a password must have
password_min_length = <%= @config['password_min_length'] %>

# list of chatmail addresses which can send outbound un-encrypted mail
passthrough_senders = <%= @config['passthrough_senders'] %>

# list of e-mail recipients for which to accept outbound un-encrypted mails
# (space-separated)
passthrough_recipients = <%= @config['passthrough_recipients'] %>

#
# Deployment Details
#

# SMTP outgoing filtermail and reinjection
filtermail_smtp_port = 10080
postfix_reinject_port = 10025

# SMTP incoming filtermail and reinjection
filtermail_smtp_port_incoming = 10081
postfix_reinject_port_incoming = 10026

# if set to "True" IPv6 is disabled
disable_ipv6 = <%= @config['disable_ipv6'] %>

# Defaults to https://iroh.{{mail_domain}} and running `iroh-relay` on the chatmail
# service.
# If you set it to anything else, the service will be disabled
# and users will be directed to use the given iroh relay URL.
# Set it to empty string if you want users to use their default iroh relay.
# iroh_relay =

# Address on which `mtail` listens,
# e.g. 127.0.0.1 or some private network
# address like 192.168.10.1.
# You can point Prometheus
# or some other OpenMetrics-compatible
# collector to
# http://{{mtail_address}}:3903/metrics
# and display collected metrics with Grafana.
#
# WARNING: do not expose this service
# to the public IP address.
#
# `mtail is not running if the setting is not set.

mtail_address = <%= @config['mtail']['address'] %>

#
# Debugging options 
#

# set to True if you want to track imap protocol execution
# in per-maildir ".in/.out" files. 
# Note that you need to manually cleanup these files
# so use this option with caution on production servers. 
imap_rawlog = <%= @config['imap_rawlog'] %>


#
# Privacy Policy
#

# postal address of privacy contact
privacy_postal = <%= @config['privacy_postal'] %>

# email address of privacy contact
privacy_mail = <%= @config['privacy_mail'] %>

# postal address of the privacy data officer
privacy_pdo = <%= @config['privacy_pdo'] %>

# postal address of the privacy supervisor
privacy_supervisor = <%= @config['privacy_supervisor'] %>
